<link rel="import" href="/../bower_components/polymer/polymer.html">

<link rel="import" href="/../bower_components/iron-form/iron-form.html">
<link rel="import" href="/../bower_components/iron-ajax/iron-ajax.html">

<link rel="import" href="/../bower_components/paper-card/paper-card.html">
<link rel="import" href="/../bower_components/paper-input/paper-input.html">
<link rel="import" href="/../bower_components/paper-button/paper-button.html">

<dom-module id="faculty-form">
	<style>
	#faculty-form {
		width: 800px;
	}
	</style>
	
	<template>
		<iron-ajax
			id="ajax"
			url="/faculties"
			content-type="application/json"
			method="POST"
			handle-as="json"
			on-reponse="postComplete"
			debounce-duration="3000">
		</iron-ajax>

		<paper-card id="faculty-form" heading="Faculty Form" image="" elevation="1" animated-shadow="false">
		  <div class="card-content">
			
			<form is="iron-form" id="form" action="/faculties" method="post">
				<paper-input value="{{name::input}}" name="name" label="Name"></paper-input>	
				<paper-input value="{{number::input}}" name="number" label="Contact Number"></paper-input>
				<paper-input value="{{dean::input}}" name="dean" label="Name of Dean"></paper-input>
			</form>
		  
		  </div>
		  <div class="card-actions">
		    <paper-button on-tap="attemptSave">Save</paper-button>
		  </div>
		</paper-card>
	</template>

	<script>
	Polymer({
		is: 'faculty-form',

		properties: {
			name: {
				type: String,
				value: '',
				notify: true
			},
			number: {
				type: String,
				value: '',
				notify: true
			},
			dean: {
				type: String,
				value: '',
				notify: true
			}
		},

		ready: function() {
			// prevents submission just in case
			var form = document.querySelector('#form');
			form.addEventListener('iron-form-presubmit', function(event) {
				event.preventDefault();
			});
		},

		attemptSave: function() {
			// validate
			var number = this.number,
				name = this.name,
				dean = this.dean;

			this.$.ajax.body = {
				"name": name,
				"number": number,
				"dean": dean
			};

			this.$.ajax.generateRequest();
		},


	});
	</script>
</dom-module>